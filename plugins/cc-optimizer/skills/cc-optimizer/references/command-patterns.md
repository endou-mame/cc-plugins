# コマンド生成パターン

## 目次

1. [生成判断基準](#生成判断基準)
2. [標準コマンド](#標準コマンド)
3. [コマンド定義テンプレート](#コマンド定義テンプレート)
4. [技術スタック別カスタマイズ](#技術スタック別カスタマイズ)

## 生成判断基準

### 常に生成

- /feature: 機能開発ワークフロー

### 条件付き生成

- /fix: テストがある場合
- /review: Git リポジトリの場合
- /test: テストフレームワークがある場合

## 標準コマンド

### /feature

新機能を開発するワークフロー。

用途:
- 新機能の実装
- 既存機能の拡張

### /fix

バグを修正するワークフロー。

用途:
- バグ修正
- 問題の調査と解決

### /review

コードをレビューするワークフロー。

用途:
- PR のレビュー
- コード品質チェック

### /test

テストを実行・生成するワークフロー。

用途:
- テスト実行
- テストカバレッジ確認
- テスト追加

## コマンド定義テンプレート

### 基本構造

```yaml
---
description: {コマンドの説明}
argument-hint: {引数のヒント}
---

# {コマンド名}

{実行内容の説明}

## ワークフロー

1. {ステップ 1}
2. {ステップ 2}
3. {ステップ 3}
```

### /feature テンプレート

```yaml
---
description: 新機能を開発する
argument-hint: 機能の説明
---

# Feature Development

指定された機能を開発する。

## ワークフロー

### 1. 要件確認

ユーザーの要件を確認し、不明点があれば質問する。

### 2. 既存コード調査

code-explorer エージェントを使用して、関連する既存コードを調査する。

### 3. 実装計画

実装計画を立て、ユーザーに確認する。

### 4. 実装

計画に従って実装を行う。

### 5. テスト

テストを実行し、問題がないことを確認する。

### 6. 完了報告

実装内容をまとめて報告する。
```

### /fix テンプレート

```yaml
---
description: バグを修正する
argument-hint: バグの説明または Issue 番号
---

# Bug Fix

指定されたバグを修正する。

## ワークフロー

### 1. 問題の特定

バグの内容を確認し、再現手順を把握する。

### 2. 原因調査

code-explorer エージェントを使用して、バグの原因を特定する。

### 3. 修正実装

最小限の変更でバグを修正する。

### 4. テスト

修正後、テストを実行してリグレッションがないことを確認する。

### 5. 完了報告

修正内容と原因をまとめて報告する。
```

### /review テンプレート

```yaml
---
description: コードをレビューする
argument-hint: ファイルパスまたは変更範囲
---

# Code Review

コードをレビューし、問題点を指摘する。

## ワークフロー

### 1. 変更内容の確認

`git diff` または指定されたファイルを確認する。

### 2. レビュー実行

code-reviewer エージェントを使用してレビューを実行する。

### 3. 結果報告

発見した問題点と改善提案を報告する。

## レビュー観点

- バグ・ロジックエラー
- セキュリティ脆弱性
- パフォーマンス問題
- コード品質
- テストカバレッジ
```

### /test テンプレート

```yaml
---
description: テストを実行または生成する
argument-hint: run | generate [ファイルパス]
---

# Test

テストを実行または生成する。

## 使い方

- `/test run` - すべてのテストを実行
- `/test generate path/to/file.ts` - 指定ファイルのテストを生成

## テスト実行

{test-command} を実行し、結果を報告する。

## テスト生成

test-generator エージェントを使用して、プロジェクトのパターンに従ったテストを生成する。
```

## 技術スタック別カスタマイズ

### Next.js プロジェクト

/feature に追加:

```markdown
## Next.js 固有の考慮事項

- App Router のファイル規約に従う
- Server Components をデフォルトで使用
- 必要に応じて 'use client' ディレクティブを追加
```

### Python プロジェクト

/test を調整:

```yaml
---
description: pytest でテストを実行または生成する
argument-hint: run | generate [ファイルパス]
---

## テスト実行

`pytest` を実行し、結果を報告する。

## テスト生成

pytest のフィクスチャパターンに従ったテストを生成する。
```

### Go プロジェクト

/test を調整:

```yaml
---
description: go test でテストを実行または生成する
argument-hint: run | generate [パッケージパス]
---

## テスト実行

`go test ./...` を実行し、結果を報告する。

## テスト生成

Go のテーブル駆動テストパターンに従ったテストを生成する。
```
